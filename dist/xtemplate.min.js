/*! xtemplate 30-09-2015 */
!function(a,b,c){"use strict";a.$scope={},c.$bindKey={},c.cache={},c.funcs={},c.util={},c.bindData=function(c,d){d||(d="data"),a.$scope[d]=c,this.$bindKey[d]=[];var e=0;for(var f in c){var g=this.util.getName(f,c);for(e=0;e<g.length;e++)this.$bindKey[d].push(g[e])}for(var h=0;h<this.$bindKey[d].length;h++){var i=this.$bindKey[d][h],j=a.$scope[d];"data"!=d&&(i=d+"."+i,j=a.$scope);var k=b.getElementsByName(i);for(e=0;e<k.length;e++){var l,m=this.cache["xdf-bind-"+i];if(m)l=m(this,j);else{var n=k[e].attributes["data-bind-to"];l=n&&"innerHTML"==n.value?this.util.getValue(i,j):this.util.html(this.util.getValue(i,j))}this.util.setValue(k[e],l)}}},c.bindName=function(a,c){var d=b.getElementsByName(a);if(d)for(var e=0;e<d.length;e++)this.util.setValue(d[e],c),d[e].style.display=""},c.bindRepeatData=function(a,b){var c=this.cache["xd-repeat-"+b];if(c&&a&&!(a.length<1)){for(var d="",e=0;e<a.length;e++){var f=this.cache["xdf-repeat-"+b];f&&(d+=f(this,a[e]))}c.innerHTML=d}},c.addFunc=function(a,b){a&&b&&(this.funcs[b]=a)}}(window,document,window.Render={}),function(a,b){"use strict";b.insertAfter=function(a,b){var c=b.parentNode;c&&(c.lastChild===b?c.appendChild(a):c.insertBefore(a,b.nextSibling))},b.getNextSibling=function(a){return a.nextElementSibling&&a.nextElementSibling.tagName==a.tagName?a.nextElementSibling:!1},b.trim=function(a){return"string"==typeof a?a.replace(/\r/g,"").replace(/\n/g,"").replace("　","").trim():b.trim(b.getStringValue(a))},b.setValue=function(a,b){var c=a.tagName,d=a.attributes["data-bind-to"];if(d)a[d.value]=b;else switch(c){case"IMG":a.src=b;break;case"INPUT":a.value=b;break;default:a.innerHTML=b}},b.html=function(a){return a&&"string"==typeof a?(a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;")):this.getStringValue(a)},b.getName=function(a,b){var c=b[a],d=typeof c;if("string"==d||"number"==d)return[a];var e=[];for(var f in c)for(var g=this.getName(f,c),h=0;h<g.length;h++)e.push(a+"."+g[h]);return e},b.startWith=function(a,b){return a&&b&&a.length>b.length&&a.substr(0,b.length)==b?!0:!1},b.isNumber=function(a){var b=/^(-?\d+)(\.\d+)?/;return null!==a.match(b)},b.getValue=function(a,b){for(var c=a.split("."),d=b[c.shift()],e=0;d&&e<c.length;e++)d=d[c[e]];return this.getStringValue(d)},b.getStringValue=function(a){return null===a||"undefined"==typeof a?"":a.toString()},b.gotoUrl=function(){var b="",c=0;for(arguments.length>0&&(b=arguments[c]),b+=-1!=b.indexOf("?")?"&":"?",c=1;c<arguments.length-1;c+=2)b+=arguments[c]+"="+encodeURIComponent(arguments[c+1])+"&";a.location.href=b},b.getUrlQuery=function(){var b={},c=a.location.search;if(c&&c.length>1){c=c.substring(1);var d=c.indexOf("#");-1!=d&&(c=c.substring(0,d));for(var e=c.split("&"),f=0;f<e.length;f++)if(d=e[f].indexOf("="),-1!=d){var g=e[f].substring(0,d);if(g){var h=e[f].substring(d+1);h&&(b[g]=decodeURIComponent(h))}}}return b}}(window,window.Render.util),function(a){function b(b,c){var e=b.attributes["data-bind-to"];if(e&&b.attributes.name){var f=b.attributes.name.value,g=a.util.trim(b[e.value]);if(g.length>0){var h=c["xdf-bind-"+f];if(h)return!0;b[e.value]="";var i="return "+d(g)+";";try{return c["xdf-bind-"+f]=new Function("my","vo",i),!0}catch(j){console.log("解析bind模板"+e.value+"出错，"+j.message)}}}return!1}function c(b){var c=b.attributes["data-repeat-name"];c&&a.initRepeat(b,c.value)}function d(a){for(var b,c=0,d=0,g=0,h=[];c<a.length;)d=a.indexOf("{",c),-1!==d?(g=a.indexOf("}",d+1),-1===g&&(g=a.length),b=a.substring(d+1,g).trim(),h.push(e(a.substring(c,d))),""!==b&&h.push(f(b))):(h.push(e(a.substring(c))),g=a.length),c=g+1;return h.join("+")}function e(b){return"string"==typeof b?'"'+b.replace(/\"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace("data-bind-src","src")+'"':a.util.getStringValue(b)}function f(a){var b=!0;"#"==a[0]&&(a=a.substring(1),b=!1);var c=a.split("|");return c.length>0?b?"Render.util.html("+g(c,c.length-1)+")":g(c,c.length-1):'""'}function g(a,b){if(!(b>0))return i(a[0]);var c=a[b].split(",");if(c.length>0){var d=c[0];return c[0]=g(a,b-1),h(d)+"("+c.join(",")+")"}return""}function h(b){return b&&b.length>1&&"#"==b[0]?b.substring(1):a.funcs[b]?"my.funcs."+b:"my.funcs.noFunc"}function i(a){var b="";if(a.length>0)for(var c=j(a),d=0;d<c.length;d++)switch(c[d][0]){case"+":case"-":case"*":case"/":case"(":case")":case"$":case"'":case'"':case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b+=c[d];break;default:b+="my.util.getValue('"+c[d]+"',vo)"}return""===b?"''":b}function j(a){for(var b,c=[],d=0,e=0,f=0;f<a.length;f++)switch(a[f]){case"+":case"-":case"*":case"/":f>d&&(b=a.substring(d,f),""!==b.trim()&&c.push(b.trim())),c.push(a[f]),d=f+1;break;case"(":case")":c.push(a[f]),d=f;break;case'"':case"'":f>d&&(b=a.substring(d,f),""!==b.trim()&&c.push(b.trim())),e=k(a,f),e>0&&(c.push(a.substring(f,e+1)),f=e,d=f+1)}return a.length>d&&(b=a.substring(d,a.length),""!==b.trim()&&c.push(b.trim())),c}function k(a,b){for(var c=b+1;c<a.length;c++)if(a[c]==a[b])return c;return 0}a.init=function(d){for(var e=0;e<d.length;e++){var f=d[e];b(f,a.cache)||c(f)}},a.initRepeat=function(a,b){var c=a.innerHTML;this.cache["xd-repeat-"+b]!=a&&(this.cache["xd-repeat-"+b]=a,a.innerHTML="");var e=this.cache["xdf-repeat-"+b];if(e)return!0;var f="return "+d(c)+";";try{e=new Function("my","vo",f)}catch(g){e=function(){},console.log("解析repeat模板"+b+"出错，"+g.message)}return this.cache["xdf-repeat-"+b]=e,e}}(window.Render),function(a){"use strict";a["default"]=function(a,b){return!a&&b?b:a},a["case"]=function(a){for(var b=1;b<arguments.length;b+=2)if(a==arguments[b]&&b<arguments.length-1)return arguments[b+1];return arguments[arguments.length-1]},a.format_currency=function(a){return parseFloat(a)},a.format_date=function(a,b){"object"!=typeof a&&(a=new Date(parseInt(a))),b||(b="yyyy-MM-dd hh:mm:ss");var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},a.fixed=function(a,b){return a?a.toFixed(b):""},a.noFunc=function(a){return a},a.repeat=function(a,b){for(var c="",d=0;a>d;d++)c+=b;return c},a.left=function(a,b,c){var d=0,e="",f=/[^\x00-\xff]/g,g="",h=0;c&&(h=c.length);for(var i=a.replace(f,"**").length,j=0;i>j;j++){if(g=a.charAt(j).toString(),null!==g.match(f)?d+=2:d++,d+h>b){h>0&&(e+=c);break}e+=g}return e}}(window.Render.funcs),function(a,b,c){"use strict";var d=b.Render;c.isInit=!1,c.optAjax=!1,c.ready=function(a,b){c.isInit?(b&&d.init(document.all),"function"==typeof a&&(c.callback=a,c.callback())):"function"==typeof a&&(c.callback=a)},c.init=function(){d&&(d.init(a.all),c.isInit=!0,c.callback&&c.callback())},c.query=function(a,c){b.query_args||(b.query_args=d.util.getUrlQuery());var e=b.query_args[a];return e?void 0:c},c.util=d.util,c.load=function(a,b,e,f,g,h){var i={};i.url=b,i.data=e,h?i.error=h:c.error_callback&&(i.error=c.error_callback),i.success=function(b){var e=!0;c.checkData&&(c.checkData(b)||(e=!1)),e&&f&&(b=f(b),b||(e=!1)),e&&("[object Array]"==toString.apply(b)?d.bindRepeatData(b,a):a?d.bindData(b,a):d.bindData(b)),g&&g(e)},c.isInit&&(c.optAjax?c.optAjax.ajax(i):$.ajax(i))},c.setAjax=function(a){this.optAjax=a},"complete"===a.readyState?c.init():a.onreadystatechange=function(){"complete"===a.readyState&&c.init()}}(document,window,window.XTemplate={});